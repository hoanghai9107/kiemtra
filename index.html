<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Ki·ªÉm tra T·ª± lu·∫≠n K·∫ø to√°n</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background-color: #f8f9fa; padding-top: 40px; }
    .card { margin-top: 20px; }
    textarea { resize: vertical; }
  </style>
</head>
<body>
  <div class="container">
    <h2 class="text-center mb-4">üìù B√†i ki·ªÉm tra K·∫ø to√°n </h2>

    <div class="card shadow">
      <div class="card-header bg-primary text-white">
        C√¢u h·ªèi <span id="soCau"></span>
      </div>
      <div class="card-body">
        <p id="cauHoi" class="fw-semibold"></p>
        <label for="traLoi" class="form-label">‚úçÔ∏è Nh·∫≠p c√¢u tr·∫£ l·ªùi c·ªßa b·∫°n:</label>
        <textarea id="traLoi" class="form-control" rows="5"></textarea>
        <div class="mt-3">
          <button class="btn btn-success" onclick="kiemTra()">Ki·ªÉm tra</button>
          <button class="btn btn-secondary d-none" id="btnTiep" onclick="cauTiepTheo()">C√¢u ti·∫øp theo</button>
        </div>
      </div>
    </div>

    <div id="ketQuaCard" class="card shadow mt-3 d-none">
      <div class="card-body">
        <h5 class="card-title">üìä K·∫øt qu·∫£:</h5>
        <p id="ketQua" class="card-text"></p>
      </div>
    </div>
  </div>

  <script>
    const boDe = [
      {
        cauHoi: "T√≠nh t·ªïng 2+2=.",
        dapAn: "4"
      },
      {
        cauHoi: "T√≠nh 100:5=",
        dapAn: "20"
      },
      {
        cauHoi: "T√≠nh 2^2 + 4=",
        dapAn: "8"
      },
      {
        cauHoi: "3^2 +100:5=",
        dapAn: "29"
      }
    ];

    let chiSo = 0;

    function hienThiCauHoi() {
      document.getElementById("traLoi").value = "";
      document.getElementById("ketQua").innerText = "";
      document.getElementById("btnTiep").classList.add("d-none");
document.getElementById("ketQuaCard").classList.add("d-none");

      if (chiSo < boDe.length) {
        document.getElementById("soCau").innerText = `${chiSo + 1} / ${boDe.length}`;
        document.getElementById("cauHoi").innerText = boDe[chiSo].cauHoi;
      } else {
        document.querySelector(".container").innerHTML = `
          <div class="alert alert-success text-center" role="alert">
            üéâ B·∫°n ƒë√£ ho√†n th√†nh b√†i ki·ªÉm tra! Ch√∫c m·ª´ng!
          </div>`;
      }
    }

    function tinhDoGiong(str1, str2) {
      const word1 = str1.toLowerCase().split(/\W+/);
      const word2 = str2.toLowerCase().split(/\W+/);
      const giong = word1.filter(w => word2.includes(w));
      return giong.length / Math.max(word1.length, word2.length);
    }

    function kiemTra() {
      const traLoi = document.getElementById("traLoi").value;
      const dapAn = boDe[chiSo].dapAn;
      const doGiong = tinhDoGiong(traLoi, dapAn);
      let danhGia = "";

      if (doGiong > 0.8) danhGia = `<span class="text-success fw-bold">‚úÖ ƒê√∫ng!</span>`;
      else if (doGiong > 0.5) danhGia = `<span class="text-warning fw-bold">üü° G·∫ßn ƒë√∫ng.</span> B·∫°n n√™n b·ªï sung th√™m n·ªôi dung.`;
      else danhGia = `<span class="text-danger fw-bold">‚ùå Sai.</span>  ;

      document.getElementById("ketQua").innerHTML = danhGia;
      document.getElementById("btnTiep").classList.remove("d-none");
      document.getElementById("ketQuaCard").classList.remove("d-none");
    }

    function cauTiepTheo() {
      chiSo++;
      hienThiCauHoi();
    }

    hienThiCauHoi();
  </script>
</body>
</html>
